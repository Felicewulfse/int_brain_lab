## Download the IBL data# Load packagesimport datajoint as djimport numpy as npimport pandas as pdimport osimport matplotlib.pyplot as pltimport seaborn as sns# Set working directoryos.chdir('/Users/...')# Make connection to the databasedj.config['database.host'] = 'datajoint-public.internationalbrainlab.org'dj.config['database.user'] = 'ibl-public'dj.config['database.password'] = 'ibl-public'dj.conn()dj.config.save_local()#%%# Import tables from the datafrom nma_ibl import reference, subject, action, acquisition, data, behavior, behavior_analyses# Get the subjects and sessions data framessubjects = (subject.Subject * subject.SubjectLab * reference.Lab) # Includes a lot of unnecessary datasubjects = subjects.proj('subject_nickname', 'sex', 'subject_birth_date', 'time_zone') # Query to the database for specific tables (not data yet)df_subjects = subjects.fetch(format = 'frame').sort_values(by = ['lab_name', 'subject_nickname']).reset_index() # Get the datadf_subjects.to_excel('/Users/.../df_subjects.xlsx') # Write to excel sessions =  behavior.TrialSet * behavior_analyses.PsychResults * behavior_analyses.ReactionTime * behavior_analyses.SessionTrainingStatus * (acquisition.Session & 'task_protocol LIKE "%training%"') * acquisition.SessionUser & subjects # Includes a lot of unnecessary datasessions = sessions.proj('n_trials', 'performance_easy', 'threshold', 'bias', 'lapse_low', 'lapse_high',                       'training_status', 'user_name',                        session_duration = 'TIMEDIFF(session_end_time,session_start_time)') # Query to the database for specific tables (not data yet)df_sessions = sessions.fetch(format = 'frame').reset_index() # Get the datadf_sessions.to_excel('/Users/.../df_sessions.xlsx') # Write to excel 